<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generador de QR y Validador de Disyuntor</title>
  <link rel="stylesheet" href="estilos.css">
  <style>
    .container {
      max-width: 80%;
      margin: 0 auto;
      text-align: center;
      padding: 20px;
    }

    .qrcode {
      margin-top: 20px;
    }

    .form-group {
      margin: 10px 0;
    }

    /* Responsive styles */
    @media screen and (max-width: 600px) {
      .container {
        max-width: 100%;
      }
    }
  </style>
</head>

<body>

  <div class="container">

    <!-- Select de marcas -->
    <div class="form-group">
      <label for="marca">Selecciona la marca:</label>
      <select id="marca">
        <!-- Opciones existentes -->
        <option value="Legy,55050010,DDS608">Legy</option>
        <option value="Lexo,55000060,ST12">Lexo</option>
        <option value="Ekoline,55000010,DD862">Ekoline</option>
        <!-- Opciones adicionales... -->
      </select>
    </div>

    <!-- Input para número de serie -->
    <div class="form-group">
      <input type="text" id="numeroSerie" placeholder="Ingresa número de serie">
    </div>

    <!-- Generador de QR -->
    <button onclick="generarQR()">Generar QR</button>
    <button onclick="limpiarQR()">Limpiar</button>

    <div id="qrcode" class="qrcode"></div>

    <hr>

    <!-- Validador de Disyuntor -->
    <h2>Validador de Disyuntor</h2>
    <div class="form-group">
      <label for="potencia">Ingresa la potencia (kW):</label>
      <input type="number" id="potencia" placeholder="Ejemplo: 5.8" step="0.1">
    </div>

    <div class="form-group">
      <label for="tipoInstalacion">Tipo de instalación:</label>
      <select id="tipoInstalacion">
        <option value="monofasico">Monofásico</option>
        <option value="trifasico">Trifásico</option>
      </select>
    </div>

    <button onclick="validarDisyuntor()">Validar Disyuntor</button>
    <div id="resultado"></div>

  </div>

  <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
  <script>
    function generarQR() {
      var marcaSeleccionada = document.getElementById("marca").value;
      var numeroSerie = document.getElementById("numeroSerie").value;

      // Crear el texto para el código QR
      var partes = marcaSeleccionada.split(",");
      var textoQR = partes[0] + "," + numeroSerie + "," + partes[1] + "," + partes[2];

      // Generar el código QR
      var qrcode = new QRCode("qrcode");
      qrcode.makeCode(textoQR);
    }

    function limpiarQR() {
      document.getElementById("marca").value = "";
      document.getElementById("numeroSerie").value = "";
      document.getElementById("qrcode").innerHTML = "";
    }

    function validarDisyuntor() {
      const potencia = parseFloat(document.getElementById("potencia").value);
      const tipoInstalacion = document.getElementById("tipoInstalacion").value;
      const tensionMonofasico = 220;
      const tensionTrifasico = 380;
      let corriente;

      if (isNaN(potencia) || potencia <= 0) {
        document.getElementById("resultado").innerText = "Por favor, ingresa una potencia válida.";
        return;
      }

      // Cálculo de corriente
      if (tipoInstalacion === "monofasico") {
        corriente = (potencia * 1000) / tensionMonofasico;
      } else if (tipoInstalacion === "trifasico") {
        corriente = (potencia * 1000) / (Math.sqrt(3) * tensionTrifasico);
      } else {
        document.getElementById("resultado").innerText = "Selecciona un tipo de instalación válido.";
        return;
      }

      // Selección de disyuntor según normativa
      let disyuntor;
      if (corriente <= 10) {
        disyuntor = "10 A";
      } else if (corriente <= 16) {
        disyuntor = "16 A";
      } else if (corriente <= 20) {
        disyuntor = "20 A";
      } else if (corriente <= 25) {
        disyuntor = "25 A";
      } else if (corriente <= 32) {
        disyuntor = "32 A";
      } else if (corriente <= 40) {
        disyuntor = "40 A";
      } else {
        disyuntor = "Mayor a 40 A, consulta a un especialista";
      }

      document.getElementById("resultado").innerHTML = `
        <p>Potencia ingresada: ${potencia} kW</p>
        <p>Tipo de instalación: ${tipoInstalacion.charAt(0).toUpperCase() + tipoInstalacion.slice(1)}</p>
        <p>Corriente calculada: ${corriente.toFixed(2)} A</p>
        <p>Disyuntor sugerido: ${disyuntor}</p>
      `;
    }
  </script>

</body>

</html>
